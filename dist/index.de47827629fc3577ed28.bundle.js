(()=>{"use strict";function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}new(function(){function a(t){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e(this,"deleteTask",(function(t){var e=t.target.closest(".task").dataset.id,a=s.tasks.findIndex((function(t){return t.id===+e}));s.tasks.splice(a,1),s.renderList(s.tasks),s.updateLocal(s.tasks)})),e(this,"addTaskHandler",(function(t){var e=document.getElementById("new-task__area"),a=e.value;if("click"===t.type)return s.createTask(a),void(e.value="");t.ctrlKey&&"Enter"===t.key?(e.value+="\n",a+="\n"):"Enter"===t.key&&(t.preventDefault(),s.createTask(a),e.value="")})),e(this,"taskHandler",(function(t){var e=t.target.closest(".task").dataset.id;t.target.classList.contains("task")&&(t.target.classList.toggle("done"),s.updateTask(e,"done")),t.target.classList.contains("mark-btn")&&(t.target.classList.toggle("mark-btn_important"),t.target.closest(".task").classList.toggle("important"),s.updateTask(e,"important")),t.target.classList.contains("delete-btn")&&s.deleteTask(t)})),e(this,"searchTaskHandler",(function(t){var e=document.getElementById("tabs").querySelectorAll(".tab");e.forEach((function(t){return t.classList.remove("active")})),e[0].classList.add("active");var a=t.target.value.toLowerCase();a||s.renderList(s.tasks);var n=s.tasks.filter((function(t){return t.value.toLowerCase().includes(a)}));s.renderList(n)})),e(this,"filterTaskHandler",(function(t){if(t.target.classList.contains("tab")){var e,a=t.target.dataset.tab;if(t.target.closest(".tabs").querySelectorAll(".tab").forEach((function(t){return t.classList.remove("active")})),t.target.classList.add("active"),"active"===a)e=s.tasks.filter((function(t){return!t.done}));else{if("done"!==a)return void s.renderList(s.tasks);e=s.tasks.filter((function(t){return t.done}))}s.renderList(e)}})),this.list=t,this.tasks=[]}var s,n;return s=a,(n=[{key:"init",value:function(){this.checkLocal(),document.getElementById("add-btn").addEventListener("click",this.addTaskHandler),document.getElementById("search-input").addEventListener("input",this.searchTaskHandler),document.getElementById("tabs").addEventListener("click",this.filterTaskHandler),document.getElementById("new-task__area").addEventListener("keydown",this.addTaskHandler),this.list.addEventListener("click",this.taskHandler)}},{key:"checkLocal",value:function(){var t=localStorage.getItem("taskList");t&&(this.tasks=JSON.parse(t),this.renderList(this.tasks))}},{key:"updateLocal",value:function(t){localStorage.setItem("taskList",JSON.stringify(t))}},{key:"createTask",value:function(t){if(t){var e={value:t,important:!1,done:!1,id:Date.now()};this.renderTask(e),this.tasks.push(e),this.updateLocal(this.tasks)}}},{key:"updateTask",value:function(t,e){var a=this.tasks.find((function(e){return e.id===+t}));a[e]=!a[e],this.updateLocal(this.tasks)}},{key:"renderList",value:function(t){var e=this;this.list.innerHTML="",t.forEach((function(t){e.renderTask(t)}))}},{key:"renderTask",value:function(t){var e=t.value,a=t.important,s=t.done,n=t.id,i=a?"":"mark-btn_important",r=s?"done":"",c='\n      <li class="task '.concat(a?"important":""," ").concat(r,'" data-id=').concat(n,'>\n        <div class="task-btn__wrapper">\n          <button class="mark-btn ').concat(i,'">Mark important</button>\n          <button class="delete-btn"></button>\n        </div>\n        <div class="star"></div>\n        <span class="task__text">').concat(e,"</span>\n      </li>");this.list.insertAdjacentHTML("beforeend",c)}}])&&t(s.prototype,n),a}())(document.getElementById("task-list")).init()})();